import processing.core.PApplet;
import processing.core.PVector;


public class Rectangle extends Terrain
{

	enum Corner {TOP_LEFT, TOP_RIGHT, BOTTOM_LEFT, BOTTOM_RIGHT, CENTER, NONE};
	
	int width;
	int height;
	
	Corner grabbed;
	PVector oldMousePosition;
	
	
	Rectangle(PApplet _parent, PVector _position, int w, int h)
	{
		super(_position, _parent);
		
		width = w;
		height = h;
		grabbed = Corner.NONE;
		oldMousePosition = new PVector();
	}
	
	void draw()
	{
		parent.stroke(0);
		parent.fill(127);
		parent.rect(position.x, position.y, width, height);
	}

	void update()
	{
		// Reset if we let go of mouse
		if(!parent.mousePressed)
			grabbed = Corner.NONE;
		else if(grabbed == Corner.CENTER)
		{
			PVector deltaP = changeInPosition();
			position.x += deltaP.x;
			position.y += deltaP.y;
		}
		
	}
	
	void mousePressed()
	{
		if(parent.mouseX > position.x && parent.mouseX < position.x + width)
		{
			grabbed = Corner.CENTER;
		}		
	}
	
	PVector changeInPosition()
	{
		float deltaX = parent.mouseX - oldMousePosition.x;
		float deltaY = parent.mouseY - oldMousePosition.y;
		return new PVector(deltaX, deltaY);
	}
}